(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.CycleStorageDriver=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=storageDriver;var _writeToStore=require("./writeToStore");var _writeToStore2=_interopRequireDefault(_writeToStore);var _responseCollection=require("./responseCollection");var _responseCollection2=_interopRequireDefault(_responseCollection);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function storageDriver(request$){request$.subscribe(function(request){return(0,_writeToStore2.default)(request)});return(0,_responseCollection2.default)(request$)}},{"./responseCollection":2,"./writeToStore":3}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(request$){var local$=request$.filter(function(req){return!req.target||req.target==="local"});var session$=request$.filter(function(req){return req.target==="session"});return{local:{key:function key(n){return local$.filter(function(req){return req.key===localStorage.key(n)}).map(function(req){return req.key}).startWith(localStorage.key(n)).distinctUntilChanged()},getItem:function getItem(key){var initialValue=localStorage.getItem(key);var value$=local$.filter(function(req){return req.key===key}).map(function(req){return req.value});if(initialValue===null){return value$.startWith(initialValue)}else{return value$}}},session:{key:function key(n){return session$.filter(function(req){return req.key===sessionStorage.key(n)}).map(function(req){return req.key}).startWith(sessionStorage.key(n)).distinctUntilChanged()},getItem:function getItem(key){var initialValue=sessionStorage.getItem(key);var value$=session$.filter(function(req){return req.key===key}).map(function(req){return req.value});if(initialValue===null){return value$.startWith(initialValue)}else{return value$}}}}}},{}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function writeToStore(_ref){var _ref$target=_ref.target;var target=_ref$target===undefined?"local":_ref$target;var _ref$action=_ref.action;var action=_ref$action===undefined?"setItem":_ref$action;var key=_ref.key;var value=_ref.value;var storage=target==="local"?localStorage:sessionStorage;storage[action](key,value)}exports.default=writeToStore},{}]},{},[1])(1)});